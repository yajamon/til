# Vimでレジスタを意識して使う

- yank(y\*, d\*)等で保存している情報は、レジスタというものがあり、そこに格納されている
- レジスタに使えるキーは`[0-9a-z-.:%/]`っぽい？
    - `[-.:%/]`等の記号類はvimがシステムとしてバリバリ使ってますよ感がすごい
        - `/`は最後に検索したときキーワードっぽいのが入ってるし
        - `%`は編集しているファイル
        - `:`は最後に実行したコマンド
        - `-`, `.`はちょっとわからん
    - `[0-9]`もvimを使ってるといつの間にか値が入ってるので、勝手に使うとまずそう
    - `[a-z]`なら自由に使えるっぽい？
        - `"A`など、大文字でキーを指定するとレジスタに追記する
- レジスタ指定書式は`"{key}`
    - `"aye`とか`"a2p`とか書いて使う
- 編集モードや、コマンドモードのコマンド入力中に`Ctrl+r {key}`で中の値を取り出すことができる。

## 置換の時に効く

たとえば以下のように上の行から1行コピペして`first`から`second`へ置換したいとき、
`:s/first/second/g`を手打ちしてもいいが、レジスタから値を取り出して楽ができる。

```rust
let first = 1;
println!("first: {}", first);

let second = 2;
println!("first: {}", first);
```

手順を細かく書くと以下の通り

1. secondにカーソルをあわせ`"aye`
2. firstにカーソルをあわせ`ye`
3. 置換したい行にカーソルをあわせ`:s/`まで入力
4. `Ctrl+r a`を入力して`second`を取り出す
5. `/`を入力
6. `Ctrl+r b`を入力して`first`を取り出す
7. `/g`を入力して実行

## 参考URL

- [vim tips レジスタを使ったコピーとペースト](http://kaworu.jpn.org/kaworu/2007-11-21-2.php)
- [Vim備忘録 コピペとレジスタ - Man On a Mission](http://oplern.hatenablog.com/entry/2017/04/16/174653)
